<div class="container">
    <div class="row">
      <div class="col-md-8">
        <form id="formCreate" action="/users/updatepassword/<%= UniqueId %>"  method="POST">
            <div class="card border rounded-3">
                <div class="card-header  border-bottom p-3">
                    <div class="d-sm-flex justify-content-between align-items-center">
                      <h5 class="mb-2 mb-sm-0">Cambiar Contraseña</h5>
                    </div>
                  </div>
                <div class="card-body">
                    <div class="row">
                        <div class="form-group">
                            <label for="Password" class="control-label">Password</label>
                            <input name="Password" id="Password" class="form-control" type="text" />
                            <span for="Password" class="text-danger"></span>
                          </div>
                    </div>
                    <div class="card-footer  border-bottom p-3">
                        <div class="d-sm-flex justify-content-between align-items-center">
                          <button class="btn btn-sm btn-info" type="button" onclick="window.location.href='/users'"><i class="fa-solid fa-arrow-left"></i>
                            Regresar</button>
                          <button class="btn btn-sm btn-primary" type="submit" id="btnSave"><i
                              class="fa-solid fa-floppy-disk"></i>
                            Actualizar </button>
                        </div>
                      </div>
                </div>
            </div>
        </form>
      </div>
    </div>
</div>

<!-- Después del formulario -->
<script>
    const form = document.getElementById('formCreate');
    form.addEventListener('submit', async (event) => {
        event.preventDefault();
        
        try {
            const response = await fetch(form.action, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    Password: document.getElementById('Password').value
                })
            });

            const result = await response.json();

            if (result.success) {
                alert(result.message);
                window.location.href = '/users';
            } else {
                alert('Error: ' + result.message);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    });
</script>
